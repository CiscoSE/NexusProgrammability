{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#programmability-overview","title":"Programmability Overview","text":"<p>This site covers many areas of programmability pertaining to Cisco's Nexus Operating System (NX-OS).</p> <p>NX-OS software running on Cisco Nexus 9000 Series switches is:</p> <ul> <li>Resilient - Providing critical business-class availability</li> <li>Modular - Has extensions that accommodate business needs</li> <li>Highly Programmatic - Allows for rapid automation and orchestration through Application Programming Interfaces (APIs)</li> <li>Secure - Protects and preserves data and operations</li> <li>Flexible - Integrates and enables new technologies</li> <li>Scalable - Accommodates and grows with the business and its requirements</li> <li>Easy to Use - Reduces the amount of learning required, simplifies deployment, and provides ease of manageability</li> </ul> <p>The Nexus 9000 homepage can be found at: Cisco Nexus 9000 Series Switches</p> <p>Detailed programmability guides for each NX-OS release can be found at: NX-OS Programmability Guides</p> <p>Please select one of the categories on the left side to learn about that programmability topic.</p>"},{"location":"Telemetry/sensor-path/","title":"Common Sensor Paths","text":""},{"location":"Telemetry/sensor-path/#arp","title":"ARP","text":"Metric Openconfig Model Native Model Admin state /System/arp-items/inst-items/adminSt Operational state /System/arp-items/operSt Allow ARP outside subnet /System/arp-items/inst-items/allowStaticArpOutsideSubnet Cache limit /System/arp-items/inst-items/cacheLimit Proxy ARP state /interfaces/interface/subinterfaces/subinterface/ipv4/proxy-arp/config/mode"},{"location":"Telemetry/sensor-path/#bgp","title":"BGP","text":"Metric Openconfig Model Native Model"},{"location":"Telemetry/sensor-path/#cam","title":"CAM","text":"Metric Openconfig Model Native Model ACL TCAM /System/pltfm-items/mod-items/TcamStatsModule-list/inst-items/TcamStatsInst-list FIB TCAM /System/capacity-items/fibresutil-items"},{"location":"Telemetry/sensor-path/#cdp","title":"CDP","text":"Metric Openconfig Model Native Model All CDP info /System/cdp-items/inst-items CDP status /System/cdp-items/inst-items/adminSt Holdtime /System/cdp-items/inst-items/holdIntvl Interface admin state /System/cdp-items/inst-items/if-items/If-list/adminSt Interface ID /System/cdp-items/inst-items/if-items/If-list/id Interface VLAN /System/cdp-items/inst-items/if-items/If-list/nativeVlan Interface status /System/cdp-items/inst-items/if-items/If-list/operSt Port local MAC /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/localMAC Port MTU /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/mtu Neighbor capabilities /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/cap Remote platform type /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/platId Remote interface /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/portId Remote MAC /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/remoteMAC Remote IP /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/intf-items/IntfAddr-list/addr Remote management IP /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/mgmt-items/MgmtAddr-list/addr Remote device name /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/sysName Remote device version /System/cdp-items/inst-items/if-items/If-list/adj-items/AdjEp-list/ver"},{"location":"Telemetry/sensor-path/#copp","title":"CoPP","text":"Metric Openconfig Model Native Model Admin state /System/copp-items/adminSt Operational state /System/copp-items/operSt Class rate limiter state /System/copp-items/enableFlag Error code /System/copp-items/error Profile /System/copp-items/profile-items/prof"},{"location":"Telemetry/sensor-path/#grpc","title":"gRPC","text":"Metric Openconfig Model Native Model Listening port /System/grpc-items/port Keepalive timeout /System/grpc-items/gnmi-items/keepAliveTimeout Max calls allowed /System/grpc-items/gnmi-items/maxCalls Minimum sample interval (seconds) /System/grpc-items/gnmi-items/minSampleInterval"},{"location":"Telemetry/sensor-path/#interface","title":"Interface","text":""},{"location":"Telemetry/sensor-path/#interface-common","title":"Interface - Common","text":"Metric Openconfig Model Native Model Admin status /interfaces/interface/state/admin-status /System/intf-items/phys-items/PhysIf-list/adminSt Operational status /interfaces/interface/state/oper-status Interface descriptions /interfaces/interface/state/description Interface names /interfaces/interface/state/name Default layer /System/ethpm-items/inst-items/systemDefaultLayer Default admin state /System/ethpm-items/inst-items/systemDefaultAdminSt System jumbo MTU size (bytes) /System/ethpm-items/inst-items/systemJumboMtu FEC Mode /System/intf-items/phys-items/PhysIf-list/FECMode Access VLAN /interfaces/interface/ethernet/switched-vlan/state/access-vlan/ /System/intf-items/phys-items/PhysIf-list/accessVlan Bundle port number /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/bdlPortNum Port channel state /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/channelingSt Member port flags /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/flags LTL programmed /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/ltlProgrammed Aggregation operational state /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/operSt Summarized operational state /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/summOperSt Aggregation member uptime /System/intf-items/phys-items/PhysIf-list/aggrmbrif-items/uptime Auto negotiation status /System/intf-items/phys-items/PhysIf-list/autoNeg Beacon status /System/intf-items/phys-items/PhysIf-list/beacon Bandwidth parameter /System/intf-items/phys-items/PhysIf-list/bw"},{"location":"Telemetry/sensor-path/#interface-counters","title":"Interface - Counters","text":"Metric Openconfig Model Native Model Interface counters /interfaces/interface/state/counters /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items Ingress octet rate (300 second avg) /System/intf-items/phys-items/PhysIf-list/dbgIfIn-items/octetRate Egress octet rate (300 second avg) /System/intf-items/phys-items/PhysIf-list/dbgIfOut-items/octetRate Ingress packets discarded /interfaces/interface/state/counters/in-discards Egress packets discarded /interfaces/interface/state/counters/out-discards Ingress broadcast packets /interfaces/interface/state/counters/in-broadcast-pkts Ingress multicast packets /interfaces/interface/state/counters/in-multicast-pkts Ingress unicast packets /interfaces/interface/state/counters/in-unicast-pkts Egress broadcast packets /interfaces/interface/state/counters/out-broadcast-pkts Egress multicast packets /interfaces/interface/state/counters/out-multicast-pkts Egress unicast packets /interfaces/interface/state/counters/out-unicast-pkts Ingress errors /interfaces/interface/state/counters/in-errors Interface status /interfaces/interface/state/oper-status Egress errors /interfaces/interface/state/counters/out-errors Alignment errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/alignmentErrors Babble count /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/babble Carrier sense errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/carrierSenseErrors Control input unknown OP codes /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/controlInUnknownOpcodes Deferred transmissions /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/deferredTransmissions Excessive collisions /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/excessiveCollisions FCS errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/fCSErrors Frame too long count /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/frameTooLongs Input pause frames /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/inPauseFrames Internal MAC receive errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/internalMacReceiveErrors Internal MAC transmit errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/internalMacTransmitErrors Late collisions count /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/lateCollisions Lost carrier errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/lostCarrierErrors Multiple collision frames /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/multipleCollisionFrames No carrier errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/noCarrierErrors Output pause frames /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/outPauseFrames Runts /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/runts Single collision frames /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/singleCollisionFrames Symbol errors /System/intf-items/phys-items/PhysIf-list/dbgDot3Stats-items/symbolErrors Total Broadcast packets /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/broadcastPkts Total CRC align errors /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/cRCAlignErrors Total collisions /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/collisions Total drop events /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/dropEvents Total egress bytes /interfaces/interface/state/counters/out-octets /System/intf-items/phys-items/PhysIf-list/dbgIfOut-items/octets Total fragments /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/fragments Interface down drop /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/ifdowndrop Total ignored /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/ignored Total ingress bytes /interfaces/interface/state/counters/in-octets /System/intf-items/phys-items/PhysIf-list/dbgIfIn-items/octets Total jabbers /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/jabbers Total multicast packets /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/multicastPkts Total octets /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/octets Total Overrun /System/intf-items/phys-items/PhysIf-list/dbgEtherStats-items/overrun"},{"location":"Telemetry/sensor-path/#interface-optical","title":"Interface - Optical","text":"Metric Openconfig Model Native Model Transceiver Sensor(list) <code>N/A</code> <code>System/intf-items/phys-items/PhysIf-list/phys-items/fcot-items/lane-items</code>"},{"location":"Telemetry/sensor-path/#isis","title":"ISIS","text":"Metric Openconfig Model Native Model"},{"location":"Telemetry/sensor-path/#lacp","title":"LACP","text":"Metric Openconfig Model Native Model"},{"location":"Telemetry/sensor-path/#lldp","title":"LLDP","text":"Metric Openconfig Model Native Model All LLDP information /lldp/interfaces/interface LLDP neighbor ID type /lldp/interfaces/interface/neighbors/neighbor/state/chassis-id-type LLDP chassis ID /lldp/interfaces/interface/neighbors/neighbor/state/chassis-id Port ID type /lldp/interfaces/interface/neighbors/neighbor/state/port-id-type Neighbor port ID /lldp/interfaces/interface/neighbors/neighbor/state/port-id State status and type /lldp/interfaces/interface/neighbors/neighbor/capabilities/capability/state State status /lldp/interfaces/interface/neighbors/neighbor/capabilities/capability/state/enabled"},{"location":"Telemetry/sensor-path/#ospf","title":"OSPF","text":"Metric Openconfig Model Native Model"},{"location":"Telemetry/sensor-path/#platform","title":"Platform","text":"Metric Openconfig Model Native Model Hostname /System/name System Serial number /System/serial System copyright /System/showversion-items/copyRight BIOS version /System/showversion-items/biosVersion BIOS date /System/showversion-items/biosCompileTime NX-OS version /System/showversion-items/nxosVersion NX-OS date /System/showversion-items/nxosCompileTime NX-OS image filename /System/showversion-items/nxosImageFile Kernel uptime /System/showversion-items/kernelUptime Last reset reason /System/showversion-items/lastResetReason Last reset OS version /System/showversion-items/lastResetSysVersion Last reset time /System/showversion-items/lastResetTime System alarms /system/alarms /System/alarms-items/alarm-items/Alarm-list System Logging /syslog/messages Running config != startup config /System/configDirty"},{"location":"Telemetry/sensor-path/#platform-boot","title":"Platform - Boot","text":"Metric Openconfig Model Native Model Auto copy status /System/boot-items/autoCopy Exclude configuration status /System/boot-items/excludeCfg Boot success status /System/boot-items/image-items/image_err Image verification /System/boot-items/image-items/imageverification Supervisor 1 image /System/boot-items/image-items/sup1 Supervisor 2 image /System/boot-items/image-items/sup2 Supervisor 1 reload image /System/boot-items/image-items/sup1NextReload Supervisor 2 reload image /System/boot-items/image-items/sup2NextReload POAP state /System/boot-items/poap"},{"location":"Telemetry/sensor-path/#platform-power-supply","title":"Platform - Power Supply","text":"Metric Openconfig Model Native Model PSU slot ID number /System/ch-items/psuslot-items/PsuSlot-list/id PSU slot physical ID number /System/ch-items/psuslot-items/PsuSlot-list/physId PSU ID number /System/ch-items/psuslot-items/PsuSlot-list/psu-items/id Serial /System/ch-items/psuslot-items/PsuSlot-list/psu-items/ser PSU slot description /System/ch-items/psuslot-items/PsuSlot-list/descr PSU description /System/ch-items/psuslot-items/PsuSlot-list/psu-items/descr Slot type /System/ch-items/psuslot-items/PsuSlot-list/type Presence /System/ch-items/psuslot-items/PsuSlot-list/operSt Location /System/ch-items/psuslot-items/PsuSlot-list/loc State /System/ch-items/psuslot-items/PsuSlot-list/psu-items/operSt Vendor /System/ch-items/psuslot-items/PsuSlot-list/psu-items/vendor Model /System/ch-items/psuslot-items/PsuSlot-list/psu-items/model Revision /System/ch-items/psuslot-items/PsuSlot-list/psu-items/rev Software alarm state /System/ch-items/psuslot-items/PsuSlot-list/psu-items/softwareAlarm Hardware alarm state /System/ch-items/psuslot-items/PsuSlot-list/psu-items/hardwareAlarm Power cord presence /System/ch-items/psuslot-items/PsuSlot-list/psu-items/typeCordConnected Amps input (actual) /System/ch-items/psuslot-items/PsuSlot-list/psu-items/inputCurr Amps input /System/ch-items/psuslot-items/PsuSlot-list/psu-items/iIn Amps output (actual) /System/ch-items/psuslot-items/PsuSlot-list/psu-items/drawnCurr Amps output /System/ch-items/psuslot-items/PsuSlot-list/psu-items/iOut Volts source /System/ch-items/psuslot-items/PsuSlot-list/psu-items/vSrc Volts input /System/ch-items/psuslot-items/PsuSlot-list/psu-items/vIn Volts output /System/ch-items/psuslot-items/PsuSlot-list/psu-items/vOut Volts PSU /System/ch-items/psuslot-items/PsuSlot-list/psu-items/volt VDR ID /System/ch-items/psuslot-items/PsuSlot-list/psu-items/vdrId Watts input /System/ch-items/psuslot-items/PsuSlot-list/psu-items/pIn Watts output /System/ch-items/psuslot-items/PsuSlot-list/psu-items/pOut Fan state /System/ch-items/psuslot-items/PsuSlot-list/psu-items/fanOpSt Fan direction /System/ch-items/psuslot-items/PsuSlot-list/psu-items/fanDirection"},{"location":"Telemetry/sensor-path/#platform-storage","title":"Platform - Storage","text":"Metric Openconfig Model Native Model Drive ID /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/id Description /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/descr Drive type /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/type Vendor /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/vendor Model /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/model Revision /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/rev Serial /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/ser Access type /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/acc Lifetime percent used /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/lifetime Manufacturing time /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/mfgTm Drive status /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/operSt Minor alarm count /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/minorAlarm Major alarm count /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/majorAlarm Terabytes written /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/tbw Bad blocks /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/gbb Drive warning count /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/warning Read error rate /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/readErrorRate P/E Cycles /System/ch-items/supslot-items/SupCSlot-list/sup-items/flash-items/peCycle"},{"location":"Telemetry/sensor-path/#platform-fans","title":"Platform - Fans","text":"Metric Openconfig Model Native Model Fan module ID /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fanId Fan ID within module /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fan_params-items/FanParams-list/trayInst Description /System/ch-items/ftslot-items/FtSlot-list/ft-items/fan-items/Fan-list/descr Presence /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fanPresent Direction /System/ch-items/ftslot-items/FtSlot-list/ft-items/fan-items/Fan-list/dir Status /System/ch-items/ftslot-items/FtSlot-list/ft-items/fan-items/Fan-list/operSt Vendor /System/ch-items/ftslot-items/FtSlot-list/ft-items/fan-items/Fan-list/vendor Model /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fanProdId RPM /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fan_params-items/FanParams-list/fanRpm Fan speed (percent) /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fan_params-items/FanParams-list/fanSpeed Max RPM /System/pie-items/env-items/fan-items/fan_env_info-items/fan_env_record-items/FanEnvRecord-list/fan_params-items/FanParams-list/maxRpm"},{"location":"Telemetry/sensor-path/#platform-chassis","title":"Platform - Chassis","text":"Metric Openconfig Model Native Model Chassis description /System/ch-items/descr All line cards /System/ch-items/lcslot-items/LCSlot-list Line card ID /System/ch-items/lcslot-items/LCSlot-list/lc-items/id Line card description /System/ch-items/lcslot-items/LCSlot-list/lc-items/descr Line card model /System/ch-items/lcslot-items/LCSlot-list/lc-items/model Line card serial number /System/ch-items/lcslot-items/LCSlot-list/lc-items/ser Line card hardware version /System/ch-items/lcslot-items/LCSlot-list/lc-items/hwVer Line card revision /System/ch-items/lcslot-items/LCSlot-list/lc-items/rev Line card breakout factor /System/ch-items/lcslot-items/LCSlot-list/lc-items/breakoutFactor Line card MAC /System/ch-items/lcslot-items/LCSlot-list/lc-items/macB Line card MAC end /System/ch-items/lcslot-items/LCSlot-list/lc-items/macE Line card number of ports /System/ch-items/lcslot-items/LCSlot-list/lc-items/numP Line card operational state /System/ch-items/lcslot-items/LCSlot-list/lc-items/operSt Line card part number /System/ch-items/lcslot-items/LCSlot-list/lc-items/partNumber Line card power state /System/ch-items/lcslot-items/LCSlot-list/lc-items/pwrSt Line card physical presence /System/ch-items/lcslot-items/LCSlot-list/operSt Supervisor ID /System/ch-items/supslot-items/SupCSlot-list/id Supervisor location /System/ch-items/supslot-items/SupCSlot-list/loc Supervisor slot description /System/ch-items/supslot-items/SupCSlot-list/descr Supervisor physical presence /System/ch-items/supslot-items/SupCSlot-list/operSt Supervisor power status /System/ch-items/supslot-items/SupCSlot-list/poweroff Supervisor CPU ID /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/id Supervisor CPU vendor /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/vendor Supervisor CPU model /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/model Supervisor CPU architecture /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/arch Supervisor CPU speed (GHz) /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/speed Supervisor CPU cores /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/cores Supervisor CPU cores enabled /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/coresEn Supervisor CPU threads /System/ch-items/supslot-items/SupCSlot-list/sup-items/cpu-items/CPU-list/thrds Supervisor RAM DIMM ID /System/ch-items/supslot-items/SupCSlot-list/sup-items/dimm-items/Dimm-list/id Supervisor RAM total /System/ch-items/supslot-items/SupCSlot-list/sup-items/dimm-items/Dimm-list/cap Supervisor RAM used /System/ch-items/supslot-items/SupCSlot-list/sup-items/dimm-items/Dimm-list/used Supervisor temp sensors /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list Supervisor temp sensor ID /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/id Supervisor temp sensor type /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/type Supervisor temp sensor major threshold /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/majorThresh Supervisor temp sensor minor threshold /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/minorThresh Supervisor temp sensor status /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/operSt Supervisor temp sensor current temp /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/tempValue Supervisor temp sensor temp unit /System/ch-items/supslot-items/SupCSlot-list/sup-items/sensor-items/Sensor-list/unit"},{"location":"Telemetry/sensor-path/#qos","title":"QOS","text":"Metric Openconfig Model Native Model All QOS info /oc-qos:qos /System/ipqos-items Dynamic buffer share /System/ipqos-items/dynamicBufferShare"},{"location":"Telemetry/sensor-path/#qos-input-queue","title":"QOS - Input Queue","text":"Metric Openconfig Model Native Model Input queue name /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:input/oc-qos:queues/oc-qos:queue/oc-qos:state/oc-qos:name /System/ipqos-items/queuing-items/policy-items/in-items/intf-items/If-list/queCmap-items/QueuingStats-list/cmapName Input queue dropped packets /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:input/oc-qos:queues/oc-qos:queue/oc-qos:state/oc-qos:dropped-pkts /System/ipqos-items/queuing-items/policy-items/in-items/intf-items/If-list/queCmap-items/QueuingStats-list/dropPackets"},{"location":"Telemetry/sensor-path/#qos-output-queue","title":"QOS - Output Queue","text":"Metric Openconfig Model Native Model Interface ID /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:interface-id Interface ID /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/name All stats /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:output/oc-qos:queues/oc-qos:queue/oc-qos:state /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list Class map name /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:output/oc-qos:queues/oc-qos:queue/oc-qos:state/oc-qos:name /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/cmapName Policy map name /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/pmapName Current queue depth (bytes) /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/currQueueDepth Dropped byte count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/dropBytes Dropped packets /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:output/oc-qos:queues/oc-qos:queue/oc-qos:state/oc-qos:dropped-pkts /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/dropPackets Ingress queue depth /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ingQDepthBytes Ingress queue dropped packet count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ingQDropPackets Transmit octets /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:output/oc-qos:queues/oc-qos:queue/oc-qos:state/oc-qos:transmit-octets Transmit packets /oc-qos:qos/oc-qos:interfaces/oc-qos:interface/oc-qos:output/oc-qos:queues/oc-qos:queue/oc-qos:state/oc-qos:transmit-pkts /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/txPackets Multicast queue depth /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/mcCurrQueueDepth Multicast dropped bytes count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/mcDropBytes Multicast dropped packet count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/mcDropPackets Multicast transmit byte count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/mcTxBytes Multicast transmit packet count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/mcTxPackets Priority-based flow control per packet pause received count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/pfcRxPpp Priority-based flow control per packet pause transmitted count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/pfcTxPpp Priority-based flow control watchdog queue flushed packets /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/pfcwdFlushedPackets Priority-based flow control watchdog queue restored count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/pfcwdRestoredCount Priority-based flow control watchdog queue shutdown count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/pfcwdShutdownCount Random detect ECN marked packet count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/randEcnMarkedPackets QOS statistic type /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/statType Transmit byte count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/txBytes Unicast current queue depth (bytes) /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ucCurrQueueDepth Unicast droped bytes count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ucDropBytes Unicast droped packet count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ucDropPackets Unicast transmit byte count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ucTxBytes Unicast transmit packet count /System/ipqos-items/queuing-items/policy-items/out-items/intf-items/If-list/queCmap-items/QueuingStats-list/ucTxPackets"},{"location":"Telemetry/sensor-path/#system-hardware","title":"System Hardware","text":"Metric Openconfig Model Native Model Memory utilized /components/component/state/memory/utilized /System/pie-items/modules-items/module-items/Module-list/memory-items/memory_usage-items/memUsed Memory reserved /system/memory/state/reserved Memory available /components/component/state/memory/available /System/pie-items/modules-items/module-items/Module-list/memory-items/memory_usage-items/memFree Memory total /system/memory/state/physical /System/pie-items/modules-items/module-items/Module-list/memory-items/memory_usage-items/memTotal Component status /components/component/state/oper-status CPU total average utilization /system/cpus/cpu/state/total/avg CPU current utilization /components/component/cpu/utilization/state/instant /System/procsys-items/syscpusummary-items/syscpu-items/SysCpu-list/total-items/pct CPU state average utilization /components/component/cpu/utilization/state/avg /System/procsys-items/syscpusummary-items/syscpu-items/SysCpu-list/total-items/avg CPU state minimum utilization /components/component/cpu/utilization/state/min /System/procsys-items/syscpusummary-items/syscpu-items/SysCpu-list/total-items/min CPU state maximum utilization /components/component/cpu/utilization/state/max /System/procsys-items/syscpusummary-items/syscpu-items/SysCpu-list/total-items/max Fan speed /components/component/fan/state/speed Fan state /openconfig-platform:components/component/fan/state/"},{"location":"Telemetry/sensor-path/#vlan","title":"VLAN","text":"Metric Openconfig Model Native Model VLAN ID /network-instances/network-instance/vlans/vlan/state/vlan-id"},{"location":"Telemetry/yangsuite/","title":"YANG Suite","text":""},{"location":"Telemetry/yangsuite/#about-yang-suite","title":"About YANG Suite","text":"<p>Cisco YANG Suite is a set of tools and plugins to learn and test YANG programmable interfaces such as NETCONF, RESTCONF, gNMI, OpenConfig, and more.</p> <p>This tool provides a central place to interact with Cisco IOS XE, IOS XR, and NX-OS devices to assist with learning and migration to modern programmable network management tools. Features include:</p> <ul> <li>Browsing YANG modules in a GUI</li> <li>creating RPC paylods</li> <li>gRPC dial-out for streaming telemetry</li> </ul> <p>The tool can be installed in a Docker container or a Python virtual environment.</p> <p>Additional information can be found below: Cisco DevNet YANG Suite YANG Suite GitHub</p>"},{"location":"Telemetry/Dial-In/1-index/","title":"Dial-In Overview","text":""},{"location":"Telemetry/Dial-In/1-index/#about-dial-in-telemetry","title":"About Dial-In Telemetry","text":"<p>Dial-in telemetry uses model-driven methods to collect telemetry from a Cisco Nexus device. The term \"dial-in\" means the external collector is \"dialing-in\" to the Nexus device and telling the switch what to send. This process happens in two steps. The first step is for the external collector to connect to the Nexus device and tell the switch which telemetry data to collect. The second step is for the Nexus device to send this data to the external collector.</p> <p>Dial-in telemetry has multiple methods available for the data structure, encoding, and transport.</p>"},{"location":"Telemetry/Dial-In/1-index/#dial-in-telemetry-features","title":"Dial-In Telemetry Features","text":"<p>Supports the following data structure types:</p> <ul> <li>DME</li> <li>Cisco Native YANG</li> <li>OpenConfig YANG</li> </ul> <p>Supports the following encoding types:</p> <ul> <li>JSON</li> <li>GPB Key-Value</li> </ul> <p>Supports the following transport types:</p> <ul> <li>gRPC</li> </ul>"},{"location":"Telemetry/Dial-In/1-index/#about-grpc","title":"About gRPC","text":"<p>Google Remote Procedure Call (gRPC) is an open source high performance RPC framework released in 2016. gRPC has many RPCs available to control systems. It uses HTTP/2 for transport, protocol buffers for the interface description language, and includes the following features:</p> <ul> <li>Authentication</li> <li>Bi-directional streaming</li> <li>Bi-direction flow control</li> <li>Blocking bindings</li> <li>Non-blocking bindings</li> <li>Cancellation</li> <li>Timeouts</li> </ul> <p>gRPC can generate cross-platform client and server bindings for many languages. It also supports TLS and token-based authentication. gRPC uses protocol buffers to encode data.</p>"},{"location":"Telemetry/Dial-In/1-index/#about-gnmi","title":"About gNMI","text":"<p>gRPC Network Management Interface (gNMI) is a specific set of RPCs built on top of gRPC. It can be used for programming a remote device, or collecting information from a remote device. The content provided through gNMI can be modeled using YANG. gRPC carries gNMI and provides the ability to create and transmit requests.</p>"},{"location":"Telemetry/Dial-In/1-index/#nx-os-gnmi-features","title":"NX-OS gNMI Features","text":"<p>NX-OS supports the following gNMI RPCs:</p> <ul> <li>Get - Collect telemetry data from a device one time.</li> <li>Set - Modify the configuration of a device.</li> <li>Subscribe - Subscribe to an indefinite stream of telemetry data from a device.</li> <li>Capabilities - Collect the gNMI capabilities supported on a device.</li> </ul>"},{"location":"Telemetry/Dial-In/1-index/#gnmi-subscription","title":"gNMI Subscription","text":"<p>The most commonly used gNMI RPC is the subscribe RPC. Starting in NX-OS 9.3.1, Nexus switches support the following gNMI subscription features:</p> <ul> <li>Once<ul> <li>Collect current values only once.</li> </ul> </li> <li>Poll<ul> <li>When the switch receives a poll message, it will send current values.</li> </ul> </li> <li>Stream - Sample<ul> <li>Collect current values every stream interval. Supported time interval ranges are from 1 to 604800 seconds. The default sample time is 10 seconds.</li> </ul> </li> <li>Stream - On_Change<ul> <li>Collect current values immediately. After this initial collection, only collect values when there is a change.</li> </ul> </li> <li>Stream - Target_Defined<ul> <li>This allows the switch to select the best type of subscription to use (either sample or on_change).</li> </ul> </li> </ul>"},{"location":"Telemetry/Dial-In/2-configuration/","title":"gNMI Device Configuration","text":"<p>gNMI relies on gRPC. A combination of gRPC and gNMI settings are required to configure this functionality on NX-OS.</p>"},{"location":"Telemetry/Dial-In/2-configuration/#enable-grpc","title":"Enable gRPC","text":"<p>Enable the gRPC agent. <pre><code>switch# feature grpc\n</code></pre></p>"},{"location":"Telemetry/Dial-In/2-configuration/#configure-grpc-port","title":"Configure gRPC Port","text":"<p>Configure the port number used for gRPC. <pre><code>switch# grpc port 50051\n</code></pre></p> <p>Note</p> <p>Ports can be from 1024 to 65535. Default is 50051.</p>"},{"location":"Telemetry/Dial-In/2-configuration/#configure-certificate","title":"Configure Certificate","text":"<p>Specify the certificate trustpoint ID used for gRPC. <pre><code>switch# grpc certificate TRUSTPOINT\n</code></pre></p> <p>Note</p> <p>TRUSTPOINT is the name of your trustpoint ID. For more information, see Installing Identity Certificates</p>"},{"location":"Telemetry/Dial-In/2-configuration/#set-dial-in-call-limits","title":"Set Dial-In Call Limits","text":"<p>Set the limit of simultaneous dial-in calls to the gNMI server on the device. <pre><code>switch# grpc gnmi max-concurrent-calls 8\n</code></pre></p> <p>Note</p> <ul> <li>The limit can be from 1 to 16. Default is 8.</li> <li>This value applies to each VRF configured. If your limit is set to 4 and you have 2 VRFs configured, the total limit is 8.</li> </ul>"},{"location":"Telemetry/Dial-In/2-configuration/#configure-vrf","title":"Configure VRF","text":"<p>Allow the gRPC agent to accept requests on specified VRFs. <pre><code>switch# grpc use-vrf default\n</code></pre></p> <p>Note</p> <p>By default, the management VRF accepts incoming requests when the gRPC feature is enabled.</p>"},{"location":"Telemetry/Dial-In/2-configuration/#enable-openconfig-optional","title":"Enable OpenConfig (Optional)","text":"<p>At this point, your device is ready to use the Cisco native YANG model with gNMI. If you'd like to use the OpenConfig model instead, it will need to be enabled with the following command: <pre><code>switch# feature openconfig\n</code></pre> After running this command, your device now supports both the Cisco native and OpenConfig YANG models.</p>"},{"location":"Telemetry/Dial-In/3-certificate/","title":"Certificate requirements for secure connections","text":"<p>As per gnmi specification:</p> <p>3.1 Session Security, Authentication and RPC Authorization</p> <p>The session between the client and server MUST be encrypted using TLS - and a target or client MUST NOT fall back to unencrypted sessions.</p> <p>NX-OS only supports TLS connection on gRPC, mTLS is supported since NX-OS 10.1(1). There are two certificates required in this process:</p> <ul> <li>Server certificate: Used to encrypt the gRPC connection between the client and the device (in this case, the gNMI server or target)</li> <li>Client certificate: Used to authenticate a gRPC connection</li> </ul> <p>To create any type of certificate, a certificate authority (CA) is required. If you don't have one (or you are looking for something that is free), follow the steps in this guide by Jamie Nguyen: OpenSSL Certificate Authority</p> <p>Accurate time is important when dealing with TLS certificates. It is recommended to setup NTP on the client and servers/devices. If you see errors related to the certificate not being valid yet or expired, it is probably due to the client or server having the incorrect time set.</p> <p>For simplicity, this tutorial uses root but other users with less privileges can be used.</p> <p>Make sure your keys and certificates are protected.</p> <p>Tests for this tutorial are done using gNMIc and pygNMI</p>"},{"location":"Telemetry/Dial-In/3-certificate/#server-certificate","title":"Server certificate","text":"<p>A server certificate will allow you to connect to an NX-OS device securely, without the need to skip TLS verification for TLS connections.</p> <p>Note</p> <p>It is assumed that you have a valid root and intermediate CA certificates installed in your workstation. Instructions can be found at the top of this article on how to set that up.</p>"},{"location":"Telemetry/Dial-In/3-certificate/#add-the-subjectaltname-option","title":"Add the subjectAltName option","text":"<p>gRPC does not use the CN attribute of the certificate to verify hostname. Add the <code>subjectAltName=${ENV::SAN}</code> option to the /root/ca/intermediate/openssl.cnf file. This will be added in the [ server_cert ] section.</p> <p>server_cert example:</p> <pre><code>[ server_cert ]\n# Extensions for server certificates (`man x509v3_config`).\nbasicConstraints = CA:FALSE\nsubjectAltName=${ENV::SAN}\nnsCertType = server\nnsComment = \"OpenSSL Generated Server Certificate\"\nsubjectKeyIdentifier = hash\nauthorityKeyIdentifier = keyid,issuer:always\nkeyUsage = critical, digitalSignature, keyEncipherment\nextendedKeyUsage = serverAuth\n</code></pre> <p>The value <code>${ENV::SAN}</code> instructs openssl to look for the value of the subjectAltName in an environmental variable called SAN</p>"},{"location":"Telemetry/Dial-In/3-certificate/#set-the-san-variable","title":"Set the SAN variable.","text":"<p>If you don't have a DNS available, you can manually add the host entry in the /etc/hosts file if you would like to use names instead of IPs. Either one works.</p> <p>In this example, the device name is nx93000v-01.cisco.com and its management IP is 192.168.1.1.</p> <pre><code>export SAN=DNS:nx9300v-01,DNS:nx9300v-01.cisco.com,IP:192.168.1.1\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#create-key-and-certificate","title":"Create key and certificate","text":"<p>Although the file name is trivial, it is a best practice to use the hostname of the device or other identifier that summarizes the purpose of the certificate.</p> <p>Note</p> <p>The following commands are intended to be run from <code>/root/ca</code> You can use the same certificate for multiple devices. Make sure to use server_cert extensions.</p> <p><pre><code>openssl genrsa -out intermediate/private/nx9300v-01.cisco.com.key.pem\n</code></pre> <pre><code>openssl req -config intermediate/openssl.cnf -key intermediate/private/nx9300v-01.cisco.com.key.pem -new -sha256 -out intermediate/csr/nx9300v-01.cisco.com.csr.pem\n</code></pre></p> Output <pre><code>(...)\n-----\nCountry Name (2 letter code) [GB]:US\nState or Province Name [England]:CO\nLocality Name []:\nOrganization Name [Alice Ltd]:Nexus\nOrganizational Unit Name []:Datacenter\nCommon Name []:nx9300v-01.cisco.com\nEmail Address []:\n</code></pre> <pre><code>openssl ca -config intermediate/openssl.cnf -extensions server_cert -days 375 -notext -md sha256 -in intermediate/csr/nx9300v-01.cisco.com.csr.pem -out intermediate/certs/nx9300v-01.cisco.com.cert.pem\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#verify-the-certificate","title":"Verify the certificate","text":"<p>Check that the alternative name section is present and has the values set in the previous step</p> <pre><code>openssl x509 -noout -text -in intermediate/certs/nx9300v-01.cisco.com.cert.pem\n</code></pre> Output <pre><code>X509v3 Subject Alternative Name:\nDNS:nx9300v-01, IP Address:192.168.1.1\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#create-the-certificate-chain","title":"Create the certificate chain","text":"<pre><code>cat intermediate/certs/nx9300v-01.cisco.com.cert.pem &gt; intermediate/certs/nx9300v-01.cisco.com.chain.cert.pem\ncat intermediate/certs/intermediate.cert.pem &gt;&gt; intermediate/certs/nx9300v-01.cisco.com.chain.cert.pem\ncat certs/ca.cert.pem &gt;&gt; intermediate/certs/nx9300v-01.cisco.com.chain.cert.pem\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#export-the-file-into-the-device","title":"Export the file into the device.","text":"<p>Note</p> <p>Make sure to export the password. Also, your NX-OS device will need the <code>scp-server</code> feature enabled to accept the SCP transfer.</p> <pre><code>openssl pkcs12 -export -out intermediate/certs/nx9300v-01.cisco.com.pfk -inkey intermediate/private/nx9300v-01.cisco.com.key.pem -in intermediate/certs/nx9300v-01.cisco.com.chain.cert.pem\nscp intermediate/certs/nx9300v-01.cisco.com.pfk  admin@192.168.1.1:\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#import-the-pkcs12-file","title":"Import the pkcs12 file","text":"<p>Execute the following commands on the device. For this example, \"supersecret\" was used as the password. </p> <pre><code>nx9300v_01# configure\nnx9300v_01(config)# crypto ca trustpoint server\nnx9300v_01(config)# crypto ca import server pkcs12 bootflash:nx9300v-01.cisco.com.pfk supersecret\n</code></pre> <p>Configure grpc to use the truspoint above: <pre><code>nx9300v_01(config)# grpc certificate server\n</code></pre></p>"},{"location":"Telemetry/Dial-In/3-certificate/#test-with-gnmic","title":"Test with gnmic","text":"<p>Use the certificate chain file, not the standalone certificate file. The <code>--skip-verify</code> option should not be needed</p> <pre><code>gnmic -a nx9300v-01.cisco.com:50051 -u admin -p YOURPASSWORD get --path /System/name --tls-cert intermediate/certs/nx9300v-01.cisco.com.chain.cert.pem --tls-key intermediate/private/nx9300v-01.cisco.com.key.pem -e json --tls-ca intermediate/certs/ca-chain.cert.pem\n</code></pre> Output <pre><code>[\n    {\n    \"source\": \"nx9300v-01.cisco.com:50051\",\n    \"timestamp\": 1657660857691587822,\n    \"time\": \"2022-07-12T21:20:57.691587822Z\",\n    \"updates\": [\n        {\n        \"Path\": \"System/name\",\n        \"values\": {\n            \"System/name\": \"nx9300v-01\"\n        }\n        }\n    ]\n    }\n]\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#test-with-pygnmi","title":"Test with pygnmi","text":"<p>Note</p> <p>For simplicity, this example includes credentials in clear text, which is not a best practice.</p> <pre><code># Modules\nfrom pygnmi.client import gNMIclient\nimport json\n# Variables\nhost = ('nx9300v-01.cisco.com', '50051')\npaths = ['/System/name']\n\n# Body\nif __name__ == '__main__':\n    with gNMIclient(target=host, username='admin', password=\"YOURPASSWORD\", path_cert=\"./ca/intermediate/certs/nx9300v-01.cisco.com.chain.cert.pem\",\n    path_key=\"./ca/intermediate/private/nx9300v-01.cisco.com.key.pem\", path_root=\"./ca/intermediate/certs/ca-chain.cert.pem\") as gc:\n        result = gc.get(path=paths, encoding='json')\n        print(result)\n</code></pre> <pre><code># python get-nx.py \n</code></pre> Output <pre><code>{'notification': [{'timestamp': 1657660901108756130, 'update': [{'path': 'System/name', 'val': 'nx9300v-01'}]}]}\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#client-certificate","title":"Client certificate","text":"<p>If you prefer to use a certificate and key instead of a password, you can create a client certificate that can be used to authenticate against the NX-OS device. It is assumed that you have a valid root and intermediate CA certificates installed in your workstation. Instructions can be found at the top of this article on how to set that up.</p>"},{"location":"Telemetry/Dial-In/3-certificate/#create-key-and-certificate_1","title":"Create key and certificate","text":"<p>Although the file name is trivial, it is a best practice to use the username or other identifier that sumarizes the purpose of the certificate, csr and keys.</p> <p>Note</p> <ul> <li>Make sure to use usr_cert extensions</li> <li>Use the username as value for Common Name and Organizational Unit Name</li> </ul> <p>Generate private key: <pre><code>openssl genrsa -out intermediate/private/admin.key.pem 2048\n</code></pre></p> <p>Create CSR:</p> <pre><code>openssl req -config intermediate/openssl.cnf -key intermediate/private/admin.key.pem -new -sha256 -out intermediate/csr/admin.csr.pem\n</code></pre> Example <pre><code>-----\nCountry Name (2 letter code) [GB]:US\nState or Province Name [England]:CO\nLocality Name []:\nOrganization Name [Alice Ltd]:Nexus\nOrganizational Unit Name []:admin\nCommon Name []:admin\nEmail Address []:\n</code></pre> <p>Sign the certificate:  <pre><code>openssl ca -config intermediate/openssl.cnf -extensions usr_cert -days 375 -notext -md sha256 -in intermediate/csr/admin.csr.pem -out intermediate/certs/admin.cert.pem\n</code></pre></p>"},{"location":"Telemetry/Dial-In/3-certificate/#create-the-certificate-chain_1","title":"Create the certificate chain","text":"<pre><code>cat intermediate/certs/admin.cert.pem &gt; intermediate/certs/admin.chain.cert.pem \ncat intermediate/certs/intermediate.cert.pem &gt;&gt; intermediate/certs/admin.chain.cert.pem\ncat certs/ca.cert.pem &gt;&gt; intermediate/certs/admin.chain.cert.pem\n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#import-the-ca-certificate","title":"Import the CA certificate","text":"<p>For this example, gnmi-root is used as trustpoint name but it can have any name. Use the content of the root certificate only (certs/ca.cert.pem) - no chains or intermediate certs are required, when client authenticates with nxos using certificate, it needs to provide the chain of certificates(root certificate can be ommited).</p> <p>Execute the following commands on the device:</p> <pre><code>nx9300v_01# configure\nnx9300v_01(config)# crypto ca trustpoint gnmi-root\nnx9300v_01(config)# crypto ca authenticate gnmi-root\ninput (cut &amp; paste) CA certificate (chain) in PEM format;\nend the input with a line containing only END OF INPUT :\n-----BEGIN CERTIFICATE-----\n(...)\n-----END CERTIFICATE-----\nEND OF INPUT\n(...)\n\nDo you accept this certificate? [yes/no]:yes\n</code></pre> <p>Configure the grpc client root certificate: <pre><code>nx9300v_01(config)# grpc client root certificate gnmi-root\n</code></pre></p>"},{"location":"Telemetry/Dial-In/3-certificate/#create-gnmic-config-file","title":"Create gnmic config file","text":"<p>You might need to change the tls files path to match your environment Password is not required anymore</p> <pre><code># cat .gnmic.yaml\nlog-file: /tmp/gnmic.log\ndebug: true\ntls-ca: ./intermediate/certs/ca-chain.cert.pem\ntargets:\n  192.168.1.2:50051:\n    username: admin\n    tls-cert: ./intermediate/certs/admin.chain.cert.pem\n    tls-key: ./intermediate/private/admin.key.pem \n</code></pre>"},{"location":"Telemetry/Dial-In/3-certificate/#test-with-gnmic_1","title":"Test with gnmic","text":"<pre><code># gnmic get --path /System/name \n</code></pre> Output <pre><code>[\n  {\n    \"source\": \"192.168.1.2:50051\",\n    \"timestamp\": 1663693091279809206,\n    \"time\": \"2022-09-20T12:58:11.279809206-04:00\",\n    \"updates\": [\n      {\n        \"Path\": \"System/name\",\n        \"values\": {\n          \"System/name\": \"nx9300v_01\"\n        }\n      }\n    ]\n  }\n]\n</code></pre>"},{"location":"Telemetry/Dial-In/4-gnmic/","title":"Use gNMIc with NX-OS","text":""},{"location":"Telemetry/Dial-In/4-gnmic/#about-gnmic","title":"About gNMIc","text":"<p>gNMIc is a free gNMI client that provides full support for get, set, capabilities, and subscribe RPCs. It has many features and supports multiple deployment methods. More information can be found on the gNMIc homepage.</p>"},{"location":"Telemetry/Dial-In/4-gnmic/#installation","title":"Installation","text":"<p>gNMIc can be deployed on the following platforms:</p> <ul> <li>Linux</li> <li>Mac</li> <li>Windows (Using Windows Subsystem for Linux)</li> <li>Docker Container</li> </ul> <p>Instructions for each platform can be found on the gNMIc installation page.</p>"},{"location":"Telemetry/Dial-Out/1-index/","title":"Dial-Out Overview","text":""},{"location":"Telemetry/Dial-Out/1-index/#about-dial-out-telemetry","title":"About Dial-Out Telemetry","text":"<p>Dial-out telemetry uses model-driven methods to receive telemetry from a Cisco Nexus device. The term \"dial-out\" means the Nexus device is \"dialing-out\" to us and sending us telemetry data. This process happens without any action from an external source.</p> <p>Dial-out telemetry has multiple methods available for the data structure, encoding, and transport.</p>"},{"location":"Telemetry/Dial-Out/1-index/#dial-out-telemetry-features","title":"Dial-Out Telemetry Features","text":"<p>Supports the following data structure types:</p> <ul> <li>DME</li> <li>Cisco Native YANG</li> <li>OpenConfig YANG</li> </ul> <p>Supports the following encoding types:</p> <ul> <li>JSON</li> <li>GPB Compact</li> <li>GPB Key-Value</li> </ul> <p>Supports the following transport types:</p> <ul> <li>HTTP</li> <li>gRPC</li> </ul>"},{"location":"Telemetry/Dial-Out/1-index/#limitations","title":"Limitations","text":"<ul> <li>The dial-out telemetry service on NX-OS is limited to 20% of the CPU resource.</li> <li>The telemetry service cannot send more than 12 MB of data in one push. If you are collecting large amounts of data, it is possible to exceed the 12 MB limit. If this occurs, the telemetry service will drop the remaining payload in order to maintain a size of 12 MB. In order to ensure large amounts of data can be sent, you must enable gRPC chunking in your telemetry configuration. gRPC chunking allows the Nexus device to fragment the telemetry data, and requires the collector to reassemble the data. NX-OS accepts chunking sizes from 64 to 4096 bytes.</li> </ul>"},{"location":"Telemetry/Dial-Out/2-configuration/","title":"Configuration","text":""},{"location":"Telemetry/Dial-Out/telegraf/","title":"Use telegraf with NX-OS","text":"<p>telemtry_collector*</p>"}]}